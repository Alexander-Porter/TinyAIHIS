server:
  port: ${SERVER_PORT:8080}

spring:
  profiles:
    active: dev
  datasource:
    url: jdbc:mysql://${MYSQL_HOST:localhost}:${MYSQL_PORT:3306}/${MYSQL_DB:tinyhis}?useUnicode=true&characterEncoding=utf-8&serverTimezone=Asia/Shanghai&useSSL=false&allowPublicKeyRetrieval=true
    username: ${MYSQL_USER:root}
    password: ${MYSQL_PASSWORD:root}
    driver-class-name: com.mysql.cj.jdbc.Driver
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      database: ${REDIS_DB:0}
  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 50MB
  
# SiliconFlow manual client configuration (used by RagTriageService)
siliconflow:
  api-key: ${SILICONFLOW_API_KEY:}
  model: ${SILICONFLOW_MODEL:deepseek-ai/DeepSeek-V3.2}
  api-url: ${SILICONFLOW_API_URL:https://api.siliconflow.cn/v1}

mybatis-plus:
  mapper-locations: classpath:/mapper/**/*.xml
  type-aliases-package: com.tinyhis.entity
  configuration:
    map-underscore-to-camel-case: true

# JWT Configuration
jwt:
  secret: ${JWT_SECRET:}
  expiration: 86400000 # 24 hours in milliseconds



# RAG Triage Configuration
triage:
  rag:
    enabled: true
    top-k: 3
  sse:
    timeout-ms: 180000

# Medical Knowledge Base
medical:
  knowledge:
    path: file:./medical-knowledge/
    vector-path: file:./vector-index/

# Application Configuration
app:
  demo-mode: ${APP_DEMO_MODE:false}
  upload-dir: ${UPLOAD_DIR:/app/uploads}
  registration:
    fee: ${REGISTRATION_FEE:50.00}
  lab:
    default-price: ${LAB_DEFAULT_PRICE:100.00}
  queue:
    max-batch-size: ${APP_QUEUE_MAX_BATCH_SIZE:50}
    max-retry-times: ${APP_QUEUE_MAX_RETRY_TIMES:50}
    poll-interval-ms: ${APP_QUEUE_POLL_INTERVAL_MS:10}
  redis:
    registration-queue: ${REGISTRATION_QUEUE_KEY:registration:queue}
    quota-prefix: ${QUOTA_KEY_PREFIX:schedule:quota:}
    user-prefix: ${SCHEDULE_USERS_PREFIX:schedule:users:}
    chat-history-prefix: ${CHAT_HISTORY_PREFIX:chat:history:}

logging:
  level:
    com.tinyhis: INFO
